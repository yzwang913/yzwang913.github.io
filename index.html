<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MR HT Lattice Viewer</title>
  <meta name="description" content="Yan Zhang (IOPCAS) â€” moirÃ©/twisted vdW materials, continuum models, TAPW, topological analysis." />
  <meta name="color-scheme" content="light dark" />
  <style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap');

  :root{
    --bg:#f6f4ef; --bg-soft:#ffffff; --text:#0f172a; --muted:#4b5563;
    --card: rgba(255,255,255,0.86); --ring:rgba(15,23,42,0.08);
    --brand:#0ea5a6; --brand-2:#0284c7; --accent:#f59e0b;
  }
  [data-theme="dark"]{
    --bg:#0b1220; --bg-soft:#0f172a; --text:#e2e8f0; --muted:#94a3b8;
    --card: rgba(15,23,42,0.92); --ring:rgba(148,163,184,0.16);
    --brand:#22d3ee; --brand-2:#38bdf8; --accent:#fbbf24;
  }
  *{box-sizing:border-box}
  html{scroll-behavior:smooth}
  body{
    margin:0;
    font:16px/1.6 'Space Grotesk', 'Noto Sans SC', 'Microsoft YaHei', sans-serif;
    color:var(--text);
    background:
      radial-gradient(900px 500px at 15% -10%, rgba(14,165,166,0.18), transparent 60%),
      radial-gradient(600px 500px at 85% -10%, rgba(245,158,11,0.18), transparent 55%),
      linear-gradient(180deg, #fdfcf9 0%, var(--bg) 60%, #eef2f7 100%);
    transition: background-color .25s, color .25s;
  }
  [data-theme="dark"] body{
    background:
      radial-gradient(900px 500px at 15% -10%, rgba(34,211,238,0.14), transparent 60%),
      radial-gradient(600px 500px at 85% -10%, rgba(251,191,36,0.12), transparent 55%),
      linear-gradient(180deg, #0b1220 0%, #0a101e 60%, #0b1220 100%);
  }
  .wrap{max-width:1080px; margin:0 auto; padding:48px 16px 72px}
  header.hero{
    padding:72px 0 56px; position:relative; overflow:hidden;
    border-bottom:1px solid var(--ring);
    background: linear-gradient(135deg, color-mix(in oklab, var(--brand) 15%, transparent) 0%, color-mix(in oklab, var(--accent) 12%, transparent) 100%);
  }
  .brand{font-weight:800; font-size:clamp(28px,5vw,40px); letter-spacing:.3px}
  .tagline{color:var(--muted); font-size:clamp(14px,2.6vw,18px)}
  nav{display:flex; gap:12px; flex-wrap:wrap; margin-top:18px; align-items:center}
  nav a{color:var(--text); text-decoration:none; padding:8px 12px; border:1px solid var(--ring); border-radius:999px; backdrop-filter:saturate(120%);}
  nav a:hover{border-color:color-mix(in oklab, var(--ring) 50%, var(--brand)); background:color-mix(in oklab, var(--bg-soft) 80%, var(--brand) 20%)}

  .theme-toggle{width:40px;height:40px;display:grid;place-items:center;border-radius:999px;border:1px solid var(--ring);background:color-mix(in oklab, var(--bg-soft) 85%, #0000 15%);cursor:pointer;user-select:none}
  .theme-toggle:hover{border-color:color-mix(in oklab, var(--ring) 40%, var(--brand));}
  .theme-toggle .sun,.theme-toggle .moon{font-size:18px;line-height:1}
  [data-theme="light"] .theme-toggle .sun{display:inline}
  [data-theme="light"] .theme-toggle .moon{display:none}
  .theme-toggle .sun{display:none}
  .theme-toggle .moon{display:inline}
  .top-right{position:absolute; top:18px; right:16px}

  .grid{display:grid; gap:18px}
  @media (min-width:768px){ .grid.cols-2{grid-template-columns:1fr 1fr} }

  section{padding:44px 0; border-bottom:1px solid var(--ring)}
  h2{
    font-size:clamp(26px,3.6vw,34px);
    margin:0 0 10px;
    letter-spacing:.2px;
    font-weight:700;
  }
  p{margin:6px 0}

  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.86));
    border:1px solid rgba(15,23,42,0.08);
    border-radius:24px;
    padding:26px 22px 20px;
    box-shadow:0 18px 45px rgba(15,23,42,0.12);
    position:relative;
    overflow:hidden;
    transition:transform .2s ease, box-shadow .2s ease, background .2s ease;
  }
  .card::before{
    content:'';
    position:absolute;
    left:22px;
    top:18px;
    width:48px;
    height:6px;
    border-radius:999px;
    background:linear-gradient(90deg, var(--brand), var(--brand-2));
    opacity:0.85;
  }
  .card:hover{transform:translateY(-2px); box-shadow:0 26px 60px rgba(15,23,42,0.16)}
  .card p{color:var(--muted)}

  .btn{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:12px 18px;
    border-radius:14px;
    text-decoration:none;
    color:#06121f;
    background:linear-gradient(135deg, var(--brand), var(--brand-2));
    font-weight:600;
    letter-spacing:.2px;
    border:1px solid transparent;
    box-shadow:0 14px 30px rgba(2,132,199,0.22);
    transition:transform .15s ease, box-shadow .15s ease, filter .15s ease;
  }
  .btn:hover{transform:translateY(-1px); box-shadow:0 18px 36px rgba(2,132,199,0.28); filter:saturate(1.05)}
  .btn.ghost{
    background:rgba(255,255,255,0.7);
    color:var(--text);
    border:1px solid rgba(15,23,42,0.1);
    box-shadow:0 10px 20px rgba(15,23,42,0.08);
  }
  .pill{
    color:#0f172a;
    background:linear-gradient(135deg, #fef3c7, #fde68a);
    border:1px solid rgba(245,158,11,0.3);
    padding:4px 10px;
    border-radius:999px;
    font-size:12px;
    font-weight:700;
  }
  footer{padding:36px 0; color:var(--muted)}
  .muted{color:var(--muted)}
  .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
  a{color:var(--brand-2)}
  .section-lead{
    margin-top:10px;
    padding:10px 12px;
    border-radius:12px;
    background:rgba(14,165,166,0.08);
    border:1px solid rgba(14,165,166,0.18);
    font-size:14px;
  }
  .stack{display:flex; flex-direction:column; gap:18px; margin-top:18px}
  .card-title{
    margin:16px 0 8px;
    font-size:22px;
    font-weight:700;
    display:flex;
    align-items:center;
    gap:10px;
  }
  .card-actions{
    margin:14px 0 12px;
    display:flex;
    gap:12px;
    flex-wrap:wrap;
  }
  .card-note{font-size:13px}
  .embed{
    margin-top:16px;
    border-radius:16px;
    border:1px solid rgba(15,23,42,0.12);
    background:var(--bg-soft);
    overflow:hidden;
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);
  }
  .embed iframe{
    width:100%;
    height:60vh;
    min-height:420px;
    border:0;
    background:#0b1220;
  }
  #demos{
    position:relative;
    padding:48px 36px;
    border-radius:28px;
    border:1px solid var(--ring);
    border-bottom:none;
    background:
      radial-gradient(420px 240px at 12% 0%, rgba(14,165,166,0.16), transparent 60%),
      radial-gradient(420px 240px at 95% 10%, rgba(245,158,11,0.18), transparent 60%),
      var(--card);
    box-shadow:0 30px 70px rgba(15,23,42,0.12);
    overflow:hidden;
  }
  #demos::before,
  #demos::after{
    content:'';
    position:absolute;
    border-radius:50%;
    pointer-events:none;
  }
  #demos::before{
    top:-40px;
    left:-60px;
    width:180px;
    height:180px;
    background:radial-gradient(circle at 30% 30%, rgba(14,165,166,0.25), transparent 70%);
  }
  #demos::after{
    bottom:-70px;
    right:-60px;
    width:240px;
    height:240px;
    background:radial-gradient(circle at 30% 30%, rgba(2,132,199,0.25), transparent 70%);
  }
  @keyframes liftIn{
    from{opacity:0; transform:translateY(10px)}
    to{opacity:1; transform:translateY(0)}
  }
  #demos{animation: liftIn 520ms ease}
  #demos .card{animation: liftIn 640ms ease 80ms both}
  @media (max-width: 900px){
    .wrap{padding:36px 12px 60px}
    #demos{padding:32px 18px}
    .card{padding:24px 18px 18px}
    .embed iframe{height:52vh; min-height:320px}
  }
  @media (prefers-reduced-motion: reduce){
    *{animation:none !important; transition:none !important}
  }
  [data-theme="dark"] .card{
    background:linear-gradient(180deg, rgba(15,23,42,0.96), rgba(15,23,42,0.88));
    border-color:rgba(148,163,184,0.2);
    box-shadow:0 24px 60px rgba(2,6,23,0.45);
  }
  [data-theme="dark"] .btn.ghost{
    background:rgba(15,23,42,0.6);
    border-color:rgba(148,163,184,0.22);
  }
  [data-theme="dark"] .section-lead{
    background:rgba(34,211,238,0.08);
    border-color:rgba(148,163,184,0.22);
  }
  [data-theme="dark"] #demos{
    border-color:rgba(148,163,184,0.2);
    background:
      radial-gradient(420px 240px at 12% 0%, rgba(34,211,238,0.12), transparent 60%),
      radial-gradient(420px 240px at 95% 10%, rgba(251,191,36,0.12), transparent 60%),
      rgba(15,23,42,0.9);
    box-shadow:0 34px 80px rgba(2,6,23,0.45);
  }
  [data-theme="dark"] #demos::before{
    background:radial-gradient(circle at 30% 30%, rgba(34,211,238,0.3), transparent 70%);
  }
  [data-theme="dark"] #demos::after{
    background:radial-gradient(circle at 30% 30%, rgba(56,189,248,0.28), transparent 70%);
  }
  /* Hide non-project sections on landing */
  header.hero,
  #about,
  #contact,
  footer{
    display:none;
  }
  /* å¯†ç å¼¹çª—æ ·å¼ */
  .pw-modal{position:fixed; inset:0; background:rgba(2,6,23,.55); backdrop-filter:blur(2px); display:grid; place-items:center; z-index:9999}
  .pw-modal[hidden]{display:none}
  .pw-dialog{width:min(420px,92vw); background:var(--bg-soft); color:var(--text); border:1px solid var(--ring); border-radius:16px; padding:18px; box-shadow:0 24px 60px rgba(2,6,23,.5)}
  .pw-dialog h3{margin:0 0 8px}
  .pw-input{width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--ring); background:transparent; color:var(--text)}
  .pw-actions{display:flex; justify-content:flex-end; gap:8px; margin-top:12px}
  .pw-error{color:#ef4444; font-size:13px; min-height:1.2em; margin-top:6px}
</style>
</head>
<body>
  <header class="hero">
    <div class="wrap">
      <div class="brand">Yan Zhang</div>
      <div class="tagline">MoirÃ© / twisted vdW materials Â· Continuum/TAPW Â· Topological analysis Â· IOPCAS</div>
      <nav>
  <a href="#about">å…³äº</a>
  <a href="#demos">é¡¹ç›®</a>
  <a href="#contact">è”ç³»</a>
  <a class="btn" href="https://github.com/zhangyan31415" target="_blank" rel="noopener">GitHub â†’</a>
</nav>
<button id="themeToggle" class="theme-toggle top-right" title="åˆ‡æ¢æ˜æš—" aria-label="åˆ‡æ¢æ˜æš—" aria-pressed="false"><span class="sun">ğŸŒ</span><span class="moon">ğŸŒ›</span></button>
    </div>
  </header>

  <!-- å¯†ç å¼¹çª—ï¼ˆå‰ç«¯è½»é‡é—¨ç¦ï¼›ä»…ä½œç®€æ˜“é®æŒ¡ï¼Œä¸ç­‰åŒå®‰å…¨è®¤è¯ï¼‰ -->
  <div id="pw-modal" class="pw-modal" hidden>
    <div class="pw-dialog">
      <h3>è¾“å…¥è®¿é—®å¯†ç </h3>
      <p class="muted" style="margin-top:-4px">è¯¥é¡¹ç›®å—ä¿æŠ¤ï¼Œè¯·è¾“å…¥å¯†ç ç»§ç»­ã€‚</p>
      <input id="pw-input" class="pw-input" type="password" placeholder="è¯·è¾“å…¥å¯†ç " autocomplete="current-password" />
      <div id="pw-error" class="pw-error" aria-live="polite"></div>
      <div class="pw-actions">
        <button id="pw-cancel" class="btn ghost" type="button">å–æ¶ˆ</button>
        <button id="pw-submit" class="btn" type="button">ç»§ç»­</button>
      </div>
    </div>
  </div>

  <main class="wrap">
    <section id="about">
      <h2>å…³äºæˆ‘</h2>
      <p>ä¸“æ³¨äºæ‰­è½¬/æ‘©å°”èŒƒå¾·åææ–™ä¸æ‹“æ‰‘åˆ†æã€‚æ­¤é¡µä»…ä½œåç‰‡ä¸å…¥å£ã€‚</p>
    </section>
    <section id="demos" class="demos-section">
      <h2>é¡¹ç›®ä½“éªŒ</h2>
      <p class="muted section-lead">æç¤ºï¼šç‚¹å‡»ä¸‹æ–¹ã€Œæ‰“å¼€é¡¹ç›®ã€åä¼šè·³è½¬åˆ°ä¸´æ—¶é€šé“é“¾æ¥ï¼›è¯¥é“¾æ¥<strong>å¯èƒ½å˜æ›´</strong>ã€‚è‹¥æ— æ³•æ‰“å¼€ï¼Œè¯·åˆ·æ–°æœ¬é¡µæˆ–ç¨åå†è¯•ã€‚</p>
      <div class="stack">
        <article class="card">
          <h3 class="card-title">MR HT Lattice Viewer <span class="pill">ææ–™</span></h3>
          <p class="card-actions">
            <a class="btn gate-link" href="#" data-project="nano" data-url="https://blvd-documentary-sunny-golf.trycloudflare.com/">ğŸ”— æ‰“å¼€é¡¹ç›®</a>
            <button class="btn ghost gate-preview" data-project="nano" data-target="#frame-nano" data-src="https://blvd-documentary-sunny-golf.trycloudflare.com/" type="button">åœ¨é¡µé¢å†…é¢„è§ˆ</button>
          </p>
          <p class="muted card-note">æ‰“å¼€é¡¹ç›®åè·³è½¬çš„é“¾æ¥ä¸ºä¸´æ—¶é€šé“ï¼Œå¯èƒ½ä¼šæ›´æ–°ã€‚</p>
          <div id="frame-nano" class="embed" style="display:none">
            <iframe title="MR HT Lattice Viewer" loading="lazy" referrerpolicy="no-referrer"></iframe>
          </div>
        </article>
      </div>
    </section>

    <section id="contact">
      <h2>è”ç³»</h2>
      <p>GitHubï¼š<a href="https://github.com/zhangyan31415" target="_blank" rel="noopener">@zhangyan31415</a></p>
      <!-- <p>é‚®ç®±ï¼š<span class="muted">ï¼ˆå¯åœ¨æ­¤å¡«å†™ä½ çš„é‚®ä»¶åœ°å€æˆ–è”ç³»ä¿¡æ¯ï¼‰</span></p> -->
    </section>
  </main>

  <footer>
    <div class="wrap muted">Â© <span id="y"></span> Yan Zhang Â· Built with GitHub Pages</div>
  </footer>

  <script>
  // ---------- ä¸»é¢˜åˆ‡æ¢ï¼ˆå¤ªé˜³ / æœˆäº®ï¼‰ ----------
(function(){
  const root = document.documentElement;
  const btn = document.getElementById('themeToggle');
  const sysDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  const saved = localStorage.getItem('theme');
  const init = saved || (sysDark ? 'dark':'light');
  root.setAttribute('data-theme', init);
  if(btn){ btn.setAttribute('aria-pressed', init==='dark'); }
  if(btn){ btn.addEventListener('click', ()=>{
    const cur = root.getAttribute('data-theme')==='dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', cur);
    localStorage.setItem('theme', cur);
    btn.setAttribute('aria-pressed', cur==='dark');
  }); }
})();

  // ---------- è®¿é—®å¯†ç é—¨æ§ï¼ˆå‰ç«¯å“ˆå¸Œæ ¡éªŒï¼›ä»…ç”¨äºæ¼”ç¤ºï¼‰ ----------
(function(){
  const modal = document.getElementById('pw-modal');
  const input = document.getElementById('pw-input');
  const err   = document.getElementById('pw-error');
  const btnOk = document.getElementById('pw-submit');
  const btnNo = document.getElementById('pw-cancel');
  let ctx = null; // {type:'link'|'preview', url, target, btn, project}

  // å­˜å‚¨å“ˆå¸Œï¼ˆSHA-256 hexï¼‰ï¼Œé¿å…æ˜æ–‡å‡ºç°åœ¨æºç ä¸­ï¼ˆæ³¨æ„ï¼šä»…é˜²å›å­ï¼Œä¸ç­‰åŒå®‰å…¨ï¼‰
  const PASS = {
    nano: '0a5c81430ef4b9a449c4b94b8df61699fe2c725a7ef662862c6030c7e10083fc'
  };

  async function sha256Hex(text){
    const enc = new TextEncoder();
    const buf = await crypto.subtle.digest('SHA-256', enc.encode(text));
    const arr = Array.from(new Uint8Array(buf));
    return arr.map(b=>b.toString(16).padStart(2,'0')).join('');
  }

  function openModal(newCtx){ ctx = newCtx; err.textContent=''; input.value=''; modal.hidden=false; setTimeout(()=>input.focus(), 10); }
  function closeModal(){ modal.hidden=true; ctx=null; }
  async function proceed(){
    if(!ctx) return; const val = input.value.trim();
    const h = await sha256Hex(val);
    if(h !== PASS[ctx.project]){ err.textContent='å¯†ç é”™è¯¯'; input.select(); return; }
    sessionStorage.setItem('ok-'+(ctx.project||''), '1');
    if(ctx.type==='link'){
      window.open(ctx.url, '_blank', 'noopener');
    }else{
      const wrap = document.querySelector(ctx.target);
      const frame = wrap.querySelector('iframe');
      if(wrap.style.display==='none' || !wrap.style.display){
        if(!frame.src){ frame.src = ctx.url; }
        wrap.style.display='block'; ctx.btn.textContent='æ”¶èµ·é¢„è§ˆ';
      }else{ wrap.style.display='none'; ctx.btn.textContent='åœ¨é¡µé¢å†…é¢„è§ˆ'; }
    }
    closeModal();
  }

  btnOk.addEventListener('click', proceed);
  btnNo.addEventListener('click', closeModal);
  input.addEventListener('keydown', e=>{ if(e.key==='Enter') proceed(); if(e.key==='Escape') closeModal(); });

  document.querySelectorAll('.gate-link').forEach(a=>{
    a.addEventListener('click', e=>{
      e.preventDefault();
      const url = a.dataset.url || a.getAttribute('href');
      const project = a.dataset.project || '';
      if(sessionStorage.getItem('ok-'+project)==='1'){ window.open(url,'_blank','noopener'); return; }
      openModal({type:'link', url, project});
    });
  });
  document.querySelectorAll('.gate-preview').forEach(btn=>{
    btn.addEventListener('click', e=>{
      e.preventDefault();
      const url = btn.dataset.src;
      const target = btn.dataset.target;
      const project = btn.dataset.project || '';
      if(sessionStorage.getItem('ok-'+project)==='1'){
        const wrap = document.querySelector(target);
        const frame = wrap.querySelector('iframe');
        if(wrap.style.display==='none' || !wrap.style.display){
          if(!frame.src){ frame.src = url; }
          wrap.style.display='block'; btn.textContent='æ”¶èµ·é¢„è§ˆ';
        }else{ wrap.style.display='none'; btn.textContent='åœ¨é¡µé¢å†…é¢„è§ˆ'; }
        return;
      }
      openModal({type:'preview', url, target, btn, project});
    });
  });
})();

// ---------- URL å‚æ•°è¦†ç›– Quick Tunnel åœ°å€ ----------
const u = new URLSearchParams(location.search);
const nano = u.get('nano');
if(nano){
  const a = document.querySelector('a.gate-link[data-project="nano"]');
  const b = document.querySelector('button.gate-preview[data-project="nano"]');
  if(a) a.dataset.url = nano; if(b) b.dataset.src = nano;
}
</script>
</body>
</html>
